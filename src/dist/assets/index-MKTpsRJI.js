(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function o(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(t){if(t.ep)return;t.ep=!0;const n=o(t);fetch(t.href,n)}})();async function h(i){const e=await i.json();if(i.ok)return e;throw{name:"External Services Error:",message:e}}function l(i,e){e.innerHTML=i}async function a(i){return await(await fetch(i)).text()}async function d(){const i=await a("../partials/header.html"),e=document.querySelector(".header");l(i,e);const o=await a("../partials/footer.html"),s=document.querySelector(".footer");l(o,s)}class m{constructor(e,o,s,t){this.newsElement=e,this.query=o,this.counter=0,this.news=[],this.nextButton=s,this.prevButton=t,this.text=[]}async init(){this.news=await this.callNewsAPI(),this.displayNews(this.news)}async callNewsAPI(){const e=[],o=new Date;console.log(o.toISOString().split("T")[0].slice(0,7));const s=o.toISOString().split("T")[0].slice(0,7),n=`https://newsapi.org/v2/everything?q=${this.query}&from=${s}&sortBy=popularity&apiKey=c0403516282d42d1be18381f56a752d7`,r=await fetch(n),c=await h(r);return console.log(c),c.articles.forEach(u=>{e.push(u)}),e}displayNews(e){console.log(e);const o=document.createElement("h2");o.textContent=e[this.counter].title,this.newsElement.appendChild(o);const s=document.createElement("img");s.src=e[this.counter].urlToImage,s.style.width="600px",this.newsElement.appendChild(s);const t=document.createElement("p");t.innerHTML=`Source: ${e[this.counter].source.name} <br> 
        <a href="${e[this.counter].url}">${e[this.counter].url}</a>`,this.newsElement.appendChild(t),this.nextButton.addEventListener("click",()=>{if(this.counter<e.length-1){this.newsElement.innerHTML="",this.counter++;const n=document.createElement("h2");n.textContent=e[this.counter].title,this.newsElement.appendChild(n);const r=document.createElement("img");r.src=e[this.counter].urlToImage,r.style.width="600px",this.newsElement.appendChild(r);const c=document.createElement("p");c.innerHTML=`Source: ${e[this.counter].source.name} <br> 
        <a href="${e[this.counter].url}">${e[this.counter].url}</a>`,this.newsElement.appendChild(c)}}),this.prevButton.addEventListener("click",()=>{if(this.counter>0){this.newsElement.innerHTML="",this.counter--;const n=document.createElement("h2");n.textContent=e[this.counter].title,this.newsElement.appendChild(n);const r=document.createElement("img");r.src=e[this.counter].urlToImage,r.style.width="600px",this.newsElement.appendChild(r);const c=document.createElement("p");c.innerHTML=`Source: ${e[this.counter].source.name} <br> 
        <a href="${e[this.counter].url}">${e[this.counter].url}</a>`,this.newsElement.appendChild(c)}})}}d();const p=document.querySelector(".news"),f="Rio de Janeiro (Turismo)",y=document.querySelector(".next"),E=document.querySelector(".prev"),g=new m(p,f,y,E);g.init();
